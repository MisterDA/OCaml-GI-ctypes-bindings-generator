language: c
dist: trusty

sudo: required

services:
  - docker

env:
  matrix:
  fast_finish: true
    include:
      - env: TYPE=ubuntu-17.10
      - env: TYPE=debian-buster
      - env: TYPE=centos-7
        allow_failures:
      - env: TYPE=ubuntu-16.04

install:
  - docker build
      -t ocaml-gi/${TYPE}
      -f travis/Dockerfile.${TYPE}
      .

script:
  - docker run
      --interactive
      --tty
      ocaml-gi/${TYPE}
